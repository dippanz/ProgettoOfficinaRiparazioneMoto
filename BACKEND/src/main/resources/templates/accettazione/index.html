<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <th:block th:replace="~{fragments/globalFragment :: head}"></th:block>
        <script type="text/javascript"
            th:src="@{/js/main.js}"></script>

            <style>
                body {
                    font-family: Arial, sans-serif;
                    background-color: #ffffff;
                    margin: 0;
                    padding: 0;
                }
        
                .container {
                    width: 80%;
                    margin: 30px auto;
                    background: white;
                    padding: 20px;
                    border-radius: 10px;
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
                }
        
                h2, h3 {
                    text-align: center;
                    color: #333;
                }
        
                .description {
                    text-align: center;
                    margin-bottom: 20px;
                    color: #555;
                    font-size: 16px;
                    padding: 10px;
                    border-bottom: 2px solid #ddd;
                }
        
                .button-container {
                    display: flex;
                    justify-content: center;
                    margin-bottom: 20px;
                }
        
                .btn {
                    padding: 12px 20px;
                    background-color: #007bff;
                    color: white;
                    text-decoration: none;
                    border-radius: 5px;
                    transition: background-color 0.3s;
                }
        
                .btn:hover {
                    background-color: #0056b3;
                }
        
                .table-container {
                    margin-top: 20px;
                }
        
                table {
                    width: 100%;
                    border-collapse: collapse;
                    margin-top: 10px;
                }
        
                table th, table td {
                    border: 1px solid #ddd;
                    padding: 10px;
                    text-align: left;
                }
        
                table th {
                    background-color: #007bff;
                    color: white;
                }
        
                .no-data {
                    text-align: center;
                    color: #777;
                    font-size: 18px;
                    padding: 20px;
                    margin-top: 10px;
                }
            </style>
    </head>
    <body data-page="accettazione">
        <div th:replace="~{fragments/globalFragment :: modal}"></div>
        <header th:insert="~{fragments/globalFragment :: header}"></header>
        <main>
            <div>
                <h2>Gestione Accettazioni</h2>
                <p class="description">
                    Benvenuto nella tua area di gestione. Qui puoi visualizzare tutte le riparazioni registrate da te,
                    controllarne lo stato e aggiungere nuovi veicoli e clienti per le riparazioni.
                </p>

                <div class="button-container">
                    <a href="/accettazione/inserisci" class="btn">Nuova registrazione</a>
                </div>

                <div class="table-container">
                    <h3>Riparazioni Registrate</h3>
                    <table th:if="${not #lists.isEmpty(listaRiparazioni)}">
                        <thead>
                            <tr>
                                <th>Codice Servizio</th>
                                <th>Targa</th>
                                <th>Cliente</th>
                                <th>Stato</th>
                                <th>Azioni</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="riparazione : ${listaRiparazioni}">
                                <td th:text="${riparazione.codice}"></td>
                                <td th:text="${riparazione.targa}"></td>
                                <td th:text="${riparazione.emailCliente}"></td>
                                <td th:text="${riparazione.stato}"></td>
                                <td>
                                    <a th:href="@{/accettazione/dettaglio/{id}(id=${riparazione.idRiparazione})}" class="btn">Dettagli</a>
                                    <button class="btn" th:if="${riparazione.stato == 'Registrato'}">Accetta</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="no-data" th:if="${#lists.isEmpty(listaRiparazioni)}">Ancora nessun veicolo accettato.</p>
                </div>
            </div>
        </main>
        <footer th:insert="~{fragments/globalFragment :: footer}"></footer>
    </body>
</html>
